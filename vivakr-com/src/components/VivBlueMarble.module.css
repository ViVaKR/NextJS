/*  */
/* VivBlueMarble.module.css */

.game {
  --board-size: 60px; /* 셀 크기 변수 */
  --token-size: 35px; /* 토큰 크기 변수 (기존 50px에서 줄임) */
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 20px;
}

.board {
  display: grid;
  grid-template-columns: repeat(10, var(--board-size));
  gap: 5px;
  padding: 1rem; /* 패딩 약간 줄임 */
  background: #f0f0f0;
  border-radius: 1rem; /* 보더 반경 약간 줄임 */
  position: relative;
}

.cell {
  width: var(--board-size);
  height: var(--board-size);
  background: white;
  border: 1px solid #eee; /* 약간의 테두리 추가 */
  display: flex; /* 내부 요소를 flex로 관리 */
  justify-content: center; /* 가로 중앙 정렬 */
  align-items: flex-end; /* 토큰들을 하단에 정렬 */
  position: relative; /* 자식 요소 absolute positioning 기준 */
  /* overflow: hidden; */
  box-sizing: border-box; /* 패딩/보더가 크기에 포함되도록 */
}

.idx {
  position: absolute;
  top: 2px; /* 위치 조정 */
  left: 3px; /* 위치 조정 */
  font-size: 10px; /* 크기 줄임 */
  font-weight: bold;
  color: #b0a8a8; /* 약간 더 연하게 */
  z-index: 10; /* 토큰보다 위에 오도록 */
}

/* === 토큰 관련 스타일 (핵심 수정 부분) === */

/* 셀 내부에 플레이어 토큰들을 담을 컨테이너 */
.playerContainer {
  display: flex;
  justify-content: center; /* 토큰들을 중앙에 모음 */
  align-items: center; /* 수직 중앙 정렬 */
  /* 음수 gap을 사용하여 토큰들이 자연스럽게 겹치도록 함 */
  gap: -12px; /* 토큰 크기에 맞춰 조정 (var(--token-size)의 약 1/3) */
  width: 100%; /* 컨테이너 너비 */
  padding-bottom: 3px; /* 셀 바닥에서 약간 띄움 */
  position: relative; /* z-index 적용 위해 */
  z-index: 1; /* 기본 z-index */
}

/* 개별 토큰을 감싸는 래퍼 (z-index 등 개별 제어 필요시 사용) */
.tokenWrapper {
  /* position: relative; */ /* 특별한 위치 조정 없으면 필요 없을 수 있음 */
  /* z-index를 플레이어 순서 등에 따라 JS에서 설정 가능하게 남겨둘 수 있음 */
  /* 예: style={{ zIndex: playerIndex }} */
  display: flex; /* 내부 이미지 정렬 위해 */
  justify-content: center;
  align-items: center;
  transition: none;
  position: static;
}

/* === 주사위 및 버튼 스타일 (기존 코드 유지) === */
.dice {
  width: 100px;
  height: 100px;
  position: relative;
  transform-style: preserve-3d;
  perspective: 1000px;
}

.face {
  position: absolute;
  width: 100px;
  height: 100px;
  background: white;
  border: 2px solid #333;
  backface-visibility: visible; /* 뒷면 보이도록 */
}

.pip {
  position: absolute;
  width: 20px;
  height: 20px;
  background: black;
  border-radius: 50%;
}

/* 점 위치 클래스 */
.pos-tl {
  top: 10px;
  left: 10px;
}
.pos-tr {
  top: 10px;
  right: 10px;
}
.pos-bl {
  bottom: 10px;
  left: 10px;
}
.pos-br {
  bottom: 10px;
  right: 10px;
}
.pos-c {
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
.pos-lt {
  top: 10px;
  left: 10px;
}
.pos-lm {
  top: 40px;
  left: 10px;
}
.pos-lb {
  top: 70px;
  left: 10px;
}
.pos-rt {
  top: 10px;
  right: 10px;
}
.pos-rm {
  top: 40px;
  right: 10px;
}
.pos-rb {
  top: 70px;
  right: 10px;
}

/* 면 위치 */
.face-1 {
  transform: translateZ(50px);
}
.face-2 {
  transform: rotateY(90deg) translateZ(50px);
}
.face-3 {
  transform: rotateY(180deg) translateZ(50px);
}
.face-4 {
  transform: rotateY(-90deg) translateZ(50px);
}
.face-5 {
  transform: rotateX(90deg) translateZ(50px);
}
.face-6 {
  transform: rotateX(-90deg) translateZ(50px);
}

/* 버튼 스타일 */
.button {
  padding: 12px 20px; /* 패딩 조정 */
  background-color: #38bdf8;
  color: #f8fafc;
  border: none;
  border-radius: 0.75rem; /* 약간 덜 둥글게 */
  cursor: pointer;
  margin: 0 8px; /* 버튼 간격 줄임 */
  font-weight: bold;
  transition: background-color 0.2s ease, opacity 0.2s ease; /* 부드러운 전환 */
}
.button:hover:not(:disabled) {
  /* 비활성화 아닐 때만 호버 효과 */
  background-color: #0ea5e9; /* 약간 더 진한 파랑 */
}
.button:disabled {
  background-color: #94a3b8;
  opacity: 0.7; /* 비활성화 시 투명도 추가 */
  cursor: not-allowed;
}

/* JS에서 추가했던 버튼 상태 클래스 (선택적 유지) */
.button.rolling {
  background-color: #facc15; /* 굴리는 중인 플레이어 버튼 강조 (예: 노란색) */
  color: #44403c;
}

/* 게임 다시 시작 버튼 스타일 */
.resetButton {
  background-color: #f87171; /* 다른 색상으로 구분 (예: 빨간 계열) */
  color: white;
}

.resetButton:hover:not(:disabled) {
  background-color: #ef4444; /* 호버 시 더 진한 빨강 */
}

.resetButton:disabled {
  background-color: #fda4af; /* 비활성화 시 연한 빨강 */
  opacity: 0.7;
}

/* 주사위 결과 표시 스타일 */
.diceResultDisplay {
  margin-bottom: 10px; /* 보드와의 간격 */
  font-size: 1.2em;
  font-weight: bold;
  color: #333;
  min-height: 1.5em; /* 결과 없을 때도 공간 차지 */
}
/* 개별 토큰을 감싸는 래퍼 */
.tokenWrapper {
  display: flex;
  justify-content: center;
  align-items: center;
  /* 기본 상태에서는 transition 없음 */
  transition: none;
}

/* 토큰 래퍼가 애니메이션 중일 때 적용될 클래스 */
.tokenAnimating {
  /* left, top 변경 시 애니메이션 효과 적용 */
  transition: left 0.2s ease-in-out, top 0.2s ease-in-out;
  width: var(--token-size); /* CSS 변수 사용 */
  height: var(--token-size); /* CSS 변수 사용 */
  object-fit: contain; /* 이미지 비율 유지 */
  border-radius: 50%; /* 원형 모양 */
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3); /* 여기에 box-shadow 정의 */
  outline: 2px solid red;
}

/* 실제 플레이어 토큰 이미지 */
.token {
  width: var(--token-size);
  height: var(--token-size);
  object-fit: contain;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.6);
  border: 1.5px solid white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4);
  display: block;
  position: relative;
  z-index: inherit;
}
